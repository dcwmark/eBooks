/*1330464595,176833976*/

if (window.CavalryLogger) { CavalryLogger.start_js(["H\/9Of"]); }

__e("JSLoggerImpl",["Arbiter","AsyncRequest","Env","ErrorUtils","JSLogger","OptionStorage","SystemEvents","Util","copyProperties","ua","JSLoggerConfig"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('AsyncRequest'),i=b('Env'),j=b('ErrorUtils'),k=b('JSLogger'),l=b('OptionStorage'),m=b('SystemEvents'),n=b('Util'),o=b('copyProperties'),p=b('ua'),q=c('JSLoggerConfig'),r=k._;delete k._;var s='/ajax/chat/jslogger.php',t=500,u=k.create('jslogger'),v=-1,w=/X/,x=(Math.random()*2147483648|0).toString(36),y=new l('JSLogger'),z={enabled_categories:null,categories:null,send_min:7500,send_max:60000};function aa(ra){return q[ra]||z[ra];}function ba(ra){var sa=aa('enabled_categories')||{},ta=ra in sa?sa[ra]:sa.__default;return ta;}function ca(ra,event){}function da(ra,sa,event,ta,ua){this.type=ra;this.cat=sa;this.event=event;this.date=ua||new Date();this._label=sa+':'+event;if(ta)this.data=r.stringify(ta);}o(da.prototype,{seq:0,toJSON:function(){var ra={type:this.type,cat:this.cat,date:+this.date,event:this.event,seq:this.seq};if(this.data)ra.data=this.data;if(ma||this.pageId)ra.page_id=this.pageId;return ra;},fromJSON:function(ra){var sa=JSON.parse(ra);this.type=sa.type;this.cat=sa.cat;this.date=new Date(sa.date);this.event=sa.event;if(sa.page_id)this.pageId=sa.page_id;if(sa.data)this.data=sa.data;return this;},toConsole:function(){if(n[this.type]){var ra=/(\d\d:\d\d:\d\d)/.test(this.date)&&RegExp.$1,sa=(ra?ra+' ':'')+this._label;if(this.data){n[this.type](sa,p.ie()?this.data:JSON.parse(this.data));}else n[this.type](sa);}}});o(k,{_addFrameEntry:function(ra){var sa=new da();sa.fromJSON(ra);this.create(sa.cat)._addEntry(sa.type,sa.event,sa.data,sa.date);},setConsoleFilter:function(ra){if(!(ra instanceof RegExp))ra=ra?new RegExp(ra):null;y.set('filter',ra);},setDebugFilter:function(ra){if(!(ra instanceof RegExp))ra=ra?new RegExp(ra):null;y.set('debugFilter',ra);},replay:function(){for(var ra=ia;ra;ra=ra.next)ra.toConsole();},getDumpJSON:function(ra){return ea({});},dump:function(ra){fa(ra||{},function(sa){var ta=sa.getPayload();prompt('Success!  Here is your jslogger dump URL:',ta);},function(){alert('Error while sending JSLogger dump');});}});o(r._JSLogger.prototype,{_addEntry:function(ra,event,sa,ta){var ua=new da(ra,this.cat,event,sa,ta);if(ma){try{var wa=window.top.JSLogger;if(wa)wa._addFrameEntry(r.stringify(ua));}catch(va){}return;}ca(this.cat,event);if(ba(this.cat)){ua.seq=ja.seq+1;ja=ja.next=ua;while(ja.seq-ia.seq>t)ia=ia.next;while(ja.seq-ka.seq>t)ka=ka.next;}var xa=y.get('filter');if(xa&&xa.test(this.cat))ua.toConsole();var ya=y.get('debugFilter');if(ya&&ya.test(event))debugger;},debug:function(event,ra,sa){this._addEntry('debug',event,ra,sa);},log:function(event,ra,sa){return this._addEntry('log',event,ra,sa);},warn:function(event,ra,sa){return this._addEntry('warn',event,ra,sa);},error:function(event,ra,sa){return this._addEntry('error',event,ra,sa);},bump:function(event,ra){ra=isNaN(ra)?1:(1*ra);if(ma){try{window.top.JSLogger.create(this.cat).bump(event,ra);}catch(sa){}return;}ca(this.cat,event);if(!ba(this.cat))return;this._counts[event]=(this._counts[event]||0)+(ra||1);},rate:function(event,ra,sa){if(ra)this.bump(event+'_n',sa);this.bump(event+'_d',sa);}});function ea(ra){var sa={page_id:x,env_start:i.start,now:Date.now(),log:[]};if(ra){try{g.inform(k.DUMP_EVENT,ra);}catch(ta){ra={message:'Error during '+k.DUMP_EVENT+' inform',error:ta.message,stack:ta.stack};}sa.dumpData=ra;var ua=ia;while(ua=ua.next)sa.log.push(ua);}else{var ua=ra?ia:ka;while(ua=ua.next)if(/log|warn|error/.test(ua.type)&&ba(ua.cat))sa.log.push(ua);ka=ja;sa.counts=ga(true);}sa.log.sort(function(va,wa){va=va.date;wa=wa.date;return va<wa?-1:(va>wa?1:0);});return sa;}function fa(ra,sa,ta){var ua=ea(ra);if(!ra){var va=false;for(var wa in ua.counts)va=va||wa!='jslogger';if(!va&&ua.log.length<=0)return;}ua=JSON.stringify(ua,function(ya,za){return (ya=='data'&&typeof(za)=='string')?JSON.parse(za):za;});var xa=new h().setURI(s+(ra?'?dump=1':'')).setMethod('POST').setData({clientState:ua}).setReadOnly(true).setAllowCrossPageTransition(true);if(sa)xa.setHandler(sa);xa.setErrorHandler(ta||bagofholding);xa.send();}function ga(ra){var sa={};for(var ta in r.instances){var ua=r.instances[ta],va={},wa=false;for(var xa in ua._counts){wa=true;va[xa]=Math.round(ua._counts[xa]);}if(wa)sa[ta]=va;if(ra)ua._counts={};}return sa;}function ha(){var ra=aa('send_min'),sa=aa('send_max'),ta=ra*Math.pow(2,v+1);if(v>=0){u.bump('send_t'+(ta<=sa?v:'max'));fa();}v++;ta*=.75+Math.random()/2;setTimeout(ha,ta,false);}var ia,ja,ka,la=0;ia=ja=ka=new da();var ma=window!=window.top;if(!ma)ha();var na;while(na=r.backlog.shift()){var oa=k.create(na.shift()),pa=na.shift();if(na[1])na[1]=JSON.parse(na[1]);oa[pa].apply(oa,na);}var qa=k.create('sys');j.addListener(function(ra){if(ra.message=='Script error.'){qa.bump('xdomain_error');qa.debug('xdomain_error');}else qa.error('uncaught_exception',ra);});m.subscribe(m.ONLINE,function(ra,sa){qa.warn(sa?'online':'offline');});m.subscribe(m.USER,function(ra,sa){qa.warn('user',{user:sa});});m.subscribe(m.TIME_TRAVEL,function(ra,sa){qa.warn('time_travel',{dt:sa});});g.subscribe(k.DUMP_EVENT,function(ra,sa){var ta={};document.cookie.replace(/([^=;]+)(?:=([^;]*);?)?/g,function(ua){ta[RegExp.$1]=RegExp.$2;});sa.cookie={raw:document.cookie,length:document.cookie.length,parsed:ta};});});